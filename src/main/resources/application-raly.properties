# ============================================================
# Railway deployment configuration
# Variables de entorno requeridas en Railway:
#   PORT          -> inyectado automaticamente por Railway
#   MONGODB_URL   -> proveido por el plugin MongoDB de Railway
#   FIRMA_DIGITAL_CORE_URL -> URL del microservicio Core desplegado
# ============================================================

spring.application.name=SGHistorialMedico

# Railway inyecta PORT automaticamente
server.port=${PORT:8080}

# MongoDB - Railway provee MONGODB_URL como URI completa al agregar el plugin
spring.data.mongodb.uri=${MONGODB_URL}
spring.data.mongodb.database=${MONGODB_DATABASE:historial_medico}
spring.data.mongodb.auto-index-creation=true

# Pool de conexiones ajustado para plan gratuito de Railway
spring.data.mongodb.connection-pool-size=10
spring.data.mongodb.connection-pool-max-wait-time=30000
spring.data.mongodb.connection-pool-max-idle-time=30000

# Firma Digital - URL del microservicio Core en Railway
firma.digital.core.url=${FIRMA_DIGITAL_CORE_URL:http://localhost:8080/api/firma/firmar-pdf}

# Posicion de la firma en el PDF - no varia por entorno
firma.digital.posicion.x=222
firma.digital.posicion.y=25
firma.digital.posicion.width=150
firma.digital.posicion.height=50
firma.digital.posicion.page=0

# SSL deshabilitado - Railway maneja HTTPS en su reverse proxy
server.ssl.enabled=false

# Logging
logging.level.root=WARN
logging.level.com.ug.ec=INFO
logging.level.org.springframework=WARN

# Actuator - minimo necesario para healthcheck de Railway
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true