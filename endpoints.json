{
  "baseUrlDefault": "http://localhost:8081",
  "contextPathDefault": "",
  "notes": [
    "server.port is 8081 in application-dev.properties and spring.profiles.active=dev in application.properties.",
    "No explicit Spring Security configuration found; endpoints do not require Authorization by default.",
    "Dates are ISO-8601: LocalDate as yyyy-MM-dd, LocalDateTime as yyyy-MM-dd'T'HH:mm:ss"
  ],
  "endpoints": [
    {
      "verb": "POST",
      "path": "/api/v1/consultas-externas",
      "consumes": ["application/json"],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#crearConsultaExterna",
      "params": [],
      "body": {
        "type": "CrearConsultaExternaCommand",
        "dtoFQN": "com.ug.ec.application.consultaexterna.commands.CrearConsultaExternaCommand"
      },
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS -X POST \"$BASE_URL$CTX/api/v1/consultas-externas\" -H 'Content-Type: application/json' --data @examples/CrearConsultaExternaCommand.json",
        "withAuth": "curl -sS -X POST \"$BASE_URL$CTX/api/v1/consultas-externas\" -H 'Content-Type: application/json' -H \"Authorization: Bearer $TOKEN\" --data @examples/CrearConsultaExternaCommand.json"
      }
    },
    {
      "verb": "GET",
      "path": "/api/v1/consultas-externas/{id}",
      "consumes": [],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#obtenerConsultaExternaPorId",
      "params": [
        {"in":"path","name":"id","type":"string","required":true}
      ],
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS \"$BASE_URL$CTX/api/v1/consultas-externas/60f1a5c2e8f87a2b94c12345\"",
        "withAuth": "curl -sS -H \"Authorization: Bearer $TOKEN\" \"$BASE_URL$CTX/api/v1/consultas-externas/60f1a5c2e8f87a2b94c12345\""
      }
    },
    {
      "verb": "GET",
      "path": "/api/v1/consultas-externas/paciente/{cedula}",
      "consumes": [],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#buscarConsultasExternasPorCedula",
      "params": [
        {"in":"path","name":"cedula","type":"string","required":true, "pattern":"^\\d{10}$"},
        {"in":"query","name":"fechaDesde","type":"LocalDate","required":false, "format":"date"},
        {"in":"query","name":"fechaHasta","type":"LocalDate","required":false, "format":"date"},
        {"in":"query","name":"pagina","type":"int","required":false, "default":0},
        {"in":"query","name":"tamanio","type":"int","required":false, "default":10}
      ],
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS \"$BASE_URL$CTX/api/v1/consultas-externas/paciente/0912345678\"",
        "complete": "curl -sS \"$BASE_URL$CTX/api/v1/consultas-externas/paciente/0912345678?fechaDesde=2023-01-01&fechaHasta=2023-12-31&pagina=0&tamanio=10\""
      }
    },
    {
      "verb": "GET",
      "path": "/api/v1/consultas-externas/numero/{numeroConsulta}",
      "consumes": [],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#buscarConsultaExternaPorNumero",
      "params": [
        {"in":"path","name":"numeroConsulta","type":"string","required":true}
      ],
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS \"$BASE_URL$CTX/api/v1/consultas-externas/numero/CE-2023-001234\""
      }
    },
    {
      "verb": "GET",
      "path": "/api/v1/consultas-externas/buscar",
      "consumes": [],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#buscarConsultasExternasConFiltros",
      "params": [
        {"in":"query","name":"fechaDesde","type":"LocalDate","required":true, "format":"date"},
        {"in":"query","name":"fechaHasta","type":"LocalDate","required":true, "format":"date"},
        {"in":"query","name":"especialidad","type":"string","required":false},
        {"in":"query","name":"medicoTratante","type":"string","required":false},
        {"in":"query","name":"estado","type":"EstadoConsulta","required":false, "enum":["INICIADA","EN_PROCESO","COMPLETADA","CANCELADA","SUSPENDIDA"]},
        {"in":"query","name":"pagina","type":"int","required":false, "default":0},
        {"in":"query","name":"tamanio","type":"int","required":false, "default":10}
      ],
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS \"$BASE_URL$CTX/api/v1/consultas-externas/buscar?fechaDesde=2023-01-01&fechaHasta=2023-12-31\"",
        "complete": "curl -sS \"$BASE_URL$CTX/api/v1/consultas-externas/buscar?fechaDesde=2023-01-01&fechaHasta=2023-12-31&especialidad=Cardiolog%C3%ADa&medicoTratante=Juan%20Perez&estado=COMPLETADA&pagina=0&tamanio=10\""
      }
    },
    {
      "verb": "PUT",
      "path": "/api/v1/consultas-externas/{id}",
      "consumes": ["application/json"],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#actualizarConsultaExterna",
      "params": [
        {"in":"path","name":"id","type":"string","required":true}
      ],
      "body": {
        "type": "ActualizarConsultaExternaCommand",
        "dtoFQN": "com.ug.ec.application.consultaexterna.commands.ActualizarConsultaExternaCommand"
      },
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS -X PUT \"$BASE_URL$CTX/api/v1/consultas-externas/60f1a5c2e8f87a2b94c12345\" -H 'Content-Type: application/json' --data @examples/ActualizarConsultaExternaCommand.json"
      }
    },
    {
      "verb": "DELETE",
      "path": "/api/v1/consultas-externas/{id}",
      "consumes": [],
      "produces": ["application/json"],
      "controller": "ConsultaExternaController#eliminarConsultaExterna",
      "params": [
        {"in":"path","name":"id","type":"string","required":true},
        {"in":"query","name":"motivo","type":"string","required":true},
        {"in":"query","name":"usuario","type":"string","required":false, "default":"sistema"}
      ],
      "requiresAuth": false,
      "curl": {
        "minimal": "curl -sS -X DELETE \"$BASE_URL$CTX/api/v1/consultas-externas/60f1a5c2e8f87a2b94c12345?motivo=Registro%20duplicado\"",
        "complete": "curl -sS -X DELETE \"$BASE_URL$CTX/api/v1/consultas-externas/60f1a5c2e8f87a2b94c12345?motivo=Registro%20duplicado&usuario=admin.sistema\""
      }
    }
  ],
  "openapiCrosscheck": {
    "present": true,
    "file": "src/main/java/com/ug/ec/infrastructure/config/OpenApiConfig.java",
    "divergences": [
      "OpenAPI servers include http://localhost:${serverPort} (default 8080), but dev profile uses 8081. Use BASE_URL=http://localhost:8081 for local dev.",
      "No security schemes defined in OpenAPI; endpoints treated as public (no Authorization header required)."
    ]
  }
}
